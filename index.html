<!DOCTYPE html>
<html lang="de" color-mode="user">

<head>
    <meta charset=" UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crafty</title>
    <script src="./d3.v7.min.js"></script>
    <script src="./crafty.js"></script>
    <link rel="stylesheet" href="./mvp.css">
    <link rel="stylesheet" href="./styles.css">
</head>

<body onload="init()" style="max-height: 100vmax;">
    <dialog id="newConfig">
        <h2>Neue Config:</h2>
        <form method="dialog" onsubmit="noi(event)">
            <label>
                <span>Name:</span>
                <input name="game" required>
            </label>
            <button>Erstellen</button>
        </form>
        <br>
    </dialog>
    <dialog id="loadConfig">
        <h2>Config laden:</h2>
        <form method="dialog" onsubmit="loadFile(event)">
            <label>
                Crafty Spec:
                <input type="file" name="cfg" required>
            </label>
            <button>Laden</button>
        </form>
        <br>
        <h3>Beispiel Specs:</h3>
        <a href="./startrupture.json" download>StarRupture</a>
        <br>
        <br>
    </dialog>
    <header style="display: flex; align-items: center; justify-content: space-between;">
        <h1>üõ†Ô∏è Crafty</h1>
        <nav>
            <ul style="margin: 0;">
                <li>
                    <a href="#factory"><strong>Fabriken</strong></a>
                </li>
                <li>
                    <a href="#tree"><strong>TechTree</strong></a>
                </li>
                <li>
                    <a href="#map"><strong>Map</strong></a>
                </li>
                <li>
                    <button type="button" onclick="openDialog('newConfig')">Neu</button>
                </li>
                <li>
                    <button type="button" onclick="openDialog('loadConfig')">Laden</button>
                </li>
                <li>
                    <button type="button" onclick="save()">Speichern</button>
                </li>
            </ul>
        </nav>
    </header>
    <main>
        <content id="content">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <info></info>
                <div>
                    <button class="fab" type="button" onclick="addRecipe()">+ üìÑ</button>
                    <button class="fab" type="button" onclick="addFactory()">+ üè≠</button>
                </div>
            </div>
            <div style="display: grid; grid-template-columns: min-content minmax(1px, 1fr); position: relative;">
                <div style="max-width: 300px; position: sticky; top: 0px; height: fit-content; padding-top: 10px;">
                    <div style="position: relative;">
                        <button class="fab" style="float: right; margin-top: 5px;"
                            onclick="[...event.target.parentElement.children].filter(a => a != event.target).forEach(e => e.classList.toggle('hidden')); event.target.classList.toggle('flip')">‚óÄÔ∏è</button>
                        <h2>Rezepte üìÑ</h2>
                        <filter style="display:block"></filter>
                        <recipes style="display:block; overflow: auto; max-height: 80vh; border: 1px solid darkgray;">
                        </recipes>
                    </div>
                </div>
                <div style="flex-grow: 1;">
                    <outlet>
                        <calculation style="flex-grow: 1;"></calculation>
                    </outlet>
                    <tree></tree>
                </div>
            </div>
            <fab-container>
            </fab-container>
        </content>
    </main>
</body>

</html>